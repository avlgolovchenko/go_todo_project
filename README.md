# TODO Planner

TODO Planner — это веб-приложение для планирования задач с поддержкой повторяющихся задач, аутентификации через JWT, и управления задачами через REST API.

## Функциональность

- Добавление, редактирование и удаление задач.
- Поддержка правил повторения задач (ежедневно, еженедельно, ежемесячно, ежегодно).
- Маркировка задач как выполненных.
- JWT-аутентификация для защищённых маршрутов.
- Интеграция с SQLite в качестве базы данных.

---

## Выполненные задания

- **Базовая функциональность**:
  - Добавление, редактирование, удаление задач.
  - Вычисление следующей даты для повторяющихся задач.
- **Задания со звёздочкой**:
  - Поддержка сложных правил повторения задач (`w`, `m`).
  - Реализация JWT-аутентификации.
  - Написание middleware для защиты маршрутов.
  - Подготовка Dockerfile для запуска приложения.

---

## Инструкция по запуску

### 1. Запуск локально

#### Требования

- Установлен **Go версии 1.23.4** или выше.
- SQLite установлен на вашей системе.

#### Установка зависимостей
В терминале выполните:
   ```bash
   go mod tidy
   ```

#### Установите переменные окружения

Создайте `.env` файл или настройте переменные окружения:
```bash
export TODO_PORT=7540
export TODO_DBFILE=./scheduler.db
export TODO_PASSWORD=your_secure_password
```
Для запуска выполните 
go run main.go

Сервер будет доступен по адресу http://localhost:7540

Логин:
Для доступа к API необходимо пройти аутентификацию. Перейдите по адресу http://localhost:7540/login.html и введите пароль, указанный в переменной TODO_PASSWORD.



## Инструкция по запуску тестов
####	Настройка тестовой среды:
В файле tests/settings.go установите переменную Token значением JWT токена, который вы получите после прохождения аутентификации через /api/signin.
Для этого после запуска веб-сервера можно выполнить запрос 
```bash
curl -X POST -H "Content-Type: application/json" -d '{"password":"password"}' http://localhost:7540/api/signin
```

#### Запуск тестов:
Для запуска всех тестов выполните команду:
```bash
go test ./tests
```

## Запуск из докера 
Для запуска контейнера нужно его собрать с помощью команды 
```bash
docker build -t todo-app .
```

А затем запустить
```bash
docker run -p 7540:7540 -e TODO_PASSWORD=your_secure_password todo-app
```

Сервер будет доступен по адресу http://localhost:7540